{
  "network": {
    "title": "Network protocol",
    "description": "Protocol for starting and stopping FBP networks, and finding out about their state.",
    "output": {
      "stopped": {
        "description": "Inform that a given network has stopped.",
        "properties": {
          "time": {
            "type": "string",
            "format": "date-time",
            "description": "time when the network was stopped"
          },
          "uptime": {
            "type": "string",
            "format": "date-time",
            "description": "time the network was running, in seconds"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "started": {
        "description": "Inform that a given network has been started.",
        "properties": {
          "time": {
            "type": "string",
            "format": "date-time",
            "description": "time when the network was started"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "status": {
        "description": "Response to a getstatus message.",
        "properties": {
          "running": {
            "type": "boolean",
            "description": "boolean tells whether the network is running or not"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "uptime": {
            "type": "string",
            "format": "date-time",
            "description": "(optional) time the network has been running, in seconds"
          }
        }
      },
      "output": {
        "description": "An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.",
        "properties": {
          "message": {
            "type": "string",
            "description": "contents of the output line"
          },
          "type": {
            "type": "string",
            "enum": [
              "message",
              "previewurl"
            ],
            "description": "(optional) type of output, either message or previewurl"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "(optional) URL for an image generated by the runtime"
          }
        }
      },
      "error": {
        "description": "An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.",
        "properties": {
          "message": {
            "type": "any",
            "description": "contents of the error message"
          }
        }
      },
      "icon": {
        "description": "Icon of a component instance has changed.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier of the node"
          },
          "icon": {
            "type": "string",
            "description": "new icon for the component instance"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "connect": {
        "description": "Beginning of transmission on an edge.",
        "properties": {
          "id": {
            "type": "string",
            "description": "textual edge identifier, usually in form of a FBP language line"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "subgraph": {
            "type": "string",
            "description": "(optional): subgraph identifier for the event. An array of node IDs"
          }
        }
      },
      "begingroup": {
        "description": "Beginning of a group (bracket IP) on an edge.",
        "properties": {
          "id": {
            "type": "string",
            "description": "textual edge identifier, usually in form of a FBP language line"
          },
          "src": {
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "group": {
            "description": "group name",
            "type": "string"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "subgraph": {
            "type": "array",
            "description": "(optional): subgraph identifier for the event. An array of node IDs"
          }
        }
      },
      "data": {
        "description": "Data transmission on an edge.",
        "properties": {
          "id": {
            "type": "string",
            "description": "textual edge identifier, usually in form of a FBP language line"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "data": {
            "type": "any",
            "description": "actual data being transmitted, encoded in a way that can be carried over the protocol transport"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "subgraph": {
            "type": "string",
            "description": "(optional): subgraph identifier for the event. An array of node IDs"
          }
        }
      },
      "endgroup": {
        "description": "Ending of a group (bracket IP) on an edge.",
        "properties": {
          "id": {
            "type": "string",
            "description": "textual edge identifier, usually in form of a FBP language line"
          },
          "src": {
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "group": {
            "description": "group name",
            "type": "string"
          },
          "graph": {
            "description": "graph the action targets",
            "type": "string"
          },
          "subgraph": {
            "type": "array",
            "description": "(optional): subgraph identifier for the event. An array of node IDs"
          }
        }
      },
      "disconnect": {
        "description": "End of transmission on an edge.",
        "properties": {
          "id": {
            "description": "textual edge identifier, usually in form of a FBP language line"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "subgraph": {
            "type": "string",
            "description": "(optional): subgraph identifier for the event. An array of node IDs"
          }
        }
      }
    },
    "input": {
      "error": {
        "description": "Network error"
      },
      "start": {
        "description": "Start execution of a FBP network based on a given graph.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "getstatus": {
        "description": "Get the current status of the runtime. The runtime should respond with a status message.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "stop": {
        "description": "Stop execution of a FBP network based on a given graph.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "edges": {
        "description": "List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",
        "edges": {
          "type": "array",
          "description": "list of selected edges, each containing",
          "properties": {
            "src": {
              "type": "object",
              "description": "source node for the edge",
              "properties": {
                "node": {
                  "type": "string",
                  "description": "node identifier"
                },
                "port": {
                  "type": "string",
                  "description": "port name"
                }
              }
            },
            "tgt": {
              "type": "object",
              "description": "target node for the edge",
              "properties": {
                "node": {
                  "type": "string",
                  "description": "node identifier"
                },
                "port": {
                  "type": "string",
                  "description": "port name"
                },
                "graph": {
                  "type": "string",
                  "description": "graph the action targets"
                }
              }
            }
          }
        }
      }
    }
  },
  "component": {
    "title": "Component protocol",
    "description": "Protocol for handling the component registry.",
    "output": {
      "error": {
        "description": "Component error"
      },
      "component": {
        "description": "Transmit the metadata about a component instance.",
        "properties": {
          "name": {
            "type": "string",
            "description": "component name in format that can be used in graphs"
          },
          "description": {
            "type": "string",
            "description": "(optional) textual description on what the component does"
          },
          "icon": {
            "type": "string",
            "description": "(optional): visual icon for the component, matching icon names in [Font Awesome](http://fortawesome.github.io/Font-Awesome/icons/)"
          },
          "subgraph": {
            "type": "boolean",
            "description": "boolean telling whether the component is a subgraph"
          },
          "inPorts": {
            "description": "list of input ports, each containing:",
            "properties": {
              "id": {
                "type": "string",
                "description": "port name"
              },
              "type": {
                "type": "string",
                "description": "port datatype, for example `boolean`"
              },
              "description": {
                "type": "string",
                "description": "textual description of the port"
              },
              "addressable": {
                "type": "boolean",
                "description": "boolean telling whether the port is an ArrayPort"
              },
              "required": {
                "type": "boolean",
                "description": "boolean telling whether the port needs to be connected for the component to work"
              },
              "values": {
                "type": "array",
                "description": "(optional) array of the values that the port accepts for enum ports"
              },
              "default": {
                "type": "any",
                "description": "(optional) the default value received by the port"
              }
            }
          },
          "outPorts": {
            "description": "list of output ports",
            "properties": {
              "id": {
                "type": "string",
                "description": "port name"
              },
              "type": {
                "type": "string",
                "description": "port datatype, for example `boolean`"
              },
              "description": {
                "type": "string",
                "description": "textual description of the port"
              },
              "addressable": {
                "type": "boolean",
                "description": "boolean telling whether the port is an ArrayPort"
              },
              "required": {
                "type": "boolean",
                "description": "boolean telling whether the port needs to be connected for the component to work"
              }
            }
          }
        }
      },
      "source": {
        "description": "Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the component"
          },
          "language": {
            "type": "string",
            "description": "The programming language used for the component code, for example `coffeescript`"
          },
          "library": {
            "type": "string",
            "description": "(optional) Component library identifier"
          },
          "code": {
            "type": "string",
            "description": "Component source code"
          },
          "tests": {
            "type": "string",
            "description": "(optional) unit tests for the component"
          }
        }
      }
    },
    "input": {
      "error": {
        "description": "Component error"
      },
      "list": {
        "description": "Request a list of currently available components. Will be responded with a set of `component` messages."
      },
      "getsource": {
        "description": "Request for the source code of a given component. Will be responded with a `source` message.",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the component to get source code for"
          }
        }
      },
      "source": {
        "description": "Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the component"
          },
          "language": {
            "type": "string",
            "description": "The programming language used for the component code, for example `coffeescript`"
          },
          "library": {
            "type": "string",
            "description": "(optional) Component library identifier"
          },
          "code": {
            "type": "string",
            "description": "Component source code"
          },
          "tests": {
            "type": "string",
            "description": "(optional) unit tests for the component"
          }
        }
      }
    }
  },
  "runtime": {
    "title": "Runtime protocol",
    "description": "When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",
    "input": {
      "error": {
        "description": "Runtime error"
      },
      "getruntime": {
        "description": "Request the information about the runtime. When receiving this message the runtime should response with a runtime message."
      },
      "packet": {
        "description": "Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtime's input ports, or from runtime's output ports to the client.",
        "properties": {
          "port": {
            "type": "string",
            "description": "port name for the input or output port"
          },
          "event": {
            "type": "string",
            "enum": [
              "connect",
              "begingroup",
              "data",
              "endgroup",
              "disconnect"
            ],
            "description": "packet event"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "payload": {
            "type": "object",
            "description": "(optional) payload for the packet. Used only with begingroup (for group names) and data packets"
          }
        }
      }
    },
    "output": {
      "error": {
        "description": "Runtime error"
      },
      "ports": {
        "description": "Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "ID of the currently configured main graph running on the runtime"
          },
          "inPorts": {
            "description": "list of input ports",
            "properties": {
              "addressable": {
                "type": "boolean",
                "description": "boolean telling whether the port is an ArrayPort"
              },
              "id": {
                "type": "string",
                "description": "port name"
              },
              "type": {
                "description": "port datatype, for example boolean",
                "type": "string"
              },
              "required": {
                "description": "boolean telling whether the port needs to be connected for the component to work",
                "type": "boolean"
              },
              "description": {
                "type": "string",
                "description": "textual description of the port"
              }
            },
            "type": "array"
          },
          "outPorts": {
            "type": "array",
            "description": "list of output ports",
            "properties": {
              "description": {
                "type": "string",
                "description": "textual description of the port"
              },
              "required": {
                "type": "boolean",
                "description": "boolean telling whether the port needs to be connected for the component to work"
              },
              "type": {
                "description": "port datatype, for example boolean",
                "type": "string"
              },
              "id": {
                "description": "port name",
                "type": "string"
              },
              "addressable": {
                "description": "boolean telling whether the port is an ArrayPort",
                "type": "boolean"
              }
            }
          }
        }
      },
      "runtime": {
        "description": "Response from the runtime to the getruntime request.",
        "properties": {
          "id": {
            "required": false,
            "type": "string",
            "description": "(optional) runtime ID used with Flowhub Registry"
          },
          "label": {
            "description": "(optional) Human-readable description of the runtime",
            "type": "string",
            "required": false
          },
          "version": {
            "description": "version of the runtime protocol that the runtime supports, for example 0.4",
            "type": "string"
          },
          "capabilities": {
            "type": "array",
            "items": {
              "protocol:network": {
                "description": "the runtime is able to control and introspect its running networks using the Network protocol"
              },
              "protocol:component": {
                "description": "the runtime is able to list and modify its components using the Component protocol"
              },
              "protocol:runtime": {
                "description": "the runtime is able to expose the ports of its main graph using the Runtime protocol and transmit packet information to/from them"
              },
              "component:getsource": {
                "description": "runtime is able to read and send component source code back to client"
              },
              "network:persist": {
                "description": "runtime is able to *flash* a running graph setup into itself, making it persistent across reboots"
              },
              "protocol:graph": {
                "description": "the runtime is able to modify its graphs using the Graph protocol"
              },
              "component:setsource": {
                "description": "runtime is able to compile and run custom components sent as source code strings"
              }
            },
            "description": "array of capability strings for things the runtime is able to do\nIf the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message."
          },
          "graph": {
            "description": "(optional) ID of the currently configured main graph running on the runtime, if any",
            "type": "string",
            "required": false
          },
          "type": {
            "description": "type of the runtime, for example noflo-nodejs or microflo",
            "type": "string",
            "title": "Type"
          }
        }
      }
    }
  },
  "graph": {
    "title": "Graph protocol",
    "description": "This protocol is utilized for communicating about graph changes in both directions.",
    "output": {
      "error": {
        "description": "Graph error"
      },
      "addnode": {
        "description": "Add node to a graph.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "component": {
            "type": "string",
            "description": "component name used for the node",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for node metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "removenode": {
        "description": "Remove a node from a graph.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "renamenode": {
        "description": "Change the ID of a node in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original identifier for the node",
            "required": true
          },
          "to": {
            "type": "string",
            "description": "new identifier for the node",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "changenode": {
        "description": "Change the metadata associated to a node in the graph",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "structure of key-value pairs for node metadata",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "addedge": {
        "description": "Add an edge to the graph",
        "properties": {
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "required": true,
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier",
                "required": true
              },
              "port": {
                "type": "string",
                "description": "port name",
                "required": true
              },
              "index": {
                "type": [
                  "string",
                  "number"
                ],
                "description": "connection index (optional, for addressable ports)"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "required": true,
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier",
                "required": true
              },
              "port": {
                "type": "string",
                "description": "port name",
                "required": true
              },
              "index": {
                "type": "string",
                "description": "connection index (optional, for addressable ports)"
              }
            }
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for edge metadata"
          },
          "graph": {
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "removeedge": {
        "description": "Remove an edge from the graph",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          },
          "src": {
            "description": "source node for the edge",
            "required": true,
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "description": "target node for the edge",
            "required": true,
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          }
        }
      },
      "changeedge": {
        "description": "Change an edge's metadata",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "struct of key-value pairs for edge metadata"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          }
        }
      },
      "addinitial": {
        "description": "Add an IIP to the graph",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for edge metadata"
          },
          "src": {
            "type": "object",
            "properties": {
              "data": {
                "type": "any",
                "description": "IIP value in its actual data type"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              },
              "index": {
                "type": [
                  "string",
                  "number"
                ],
                "description": "connection index (optional, for addressable ports)"
              }
            }
          }
        }
      },
      "removeinitial": {
        "description": "Remove an IIP from the graph",
        "properties": {
          "tgt": {
            "type": "object",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            },
            "description": "target node for the edge"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addinport": {
        "description": "Add an exported inport to the graph.",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port"
          },
          "node": {
            "type": "string",
            "description": "node identifier"
          },
          "port": {
            "type": "string",
            "description": "internal port name"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for node metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removeinport": {
        "description": "Remove an exported port from the graph",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port to remove"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renameinport": {
        "description": "Rename an exported port in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original exported port name"
          },
          "to": {
            "type": "string",
            "description": "new exported port name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addoutport": {
        "description": "Add an exported outport to the graph.",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port"
          },
          "node": {
            "type": "string",
            "description": "node identifier"
          },
          "port": {
            "type": "string",
            "description": "internal port name"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for port metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removeoutport": {
        "description": "Remove an exported port from the graph",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port to remove"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renameoutport": {
        "description": "Rename an exported port in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original exported port name"
          },
          "to": {
            "type": "string",
            "description": "new exported port name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addgroup": {
        "description": "Add a group to the graph",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name"
          },
          "nodes": {
            "type": "array",
            "description": "an array of node ids part of the group"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for group metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removegroup": {
        "description": "Remove a group from the graph",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renamegroup": {
        "description": "Rename a group in the graph.",
        "properties": {
          "from": {
            "type": "string",
            "description": "original group name"
          },
          "to": {
            "type": "string",
            "description": "new group name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "changegroup": {
        "description": "Change a group's metadata",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "structure of key-value pairs for group metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      }
    },
    "input": {
      "error": {
        "description": "Graph error"
      },
      "clear": {
        "description": "Initialize an empty graph.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the graph being created. Used for all subsequent messages related to the graph instance",
            "required": true
          },
          "name": {
            "type": "string",
            "description": "(optional) Human-readable label for the graph"
          },
          "library": {
            "type": "string",
            "description": "(optional) Component library identifier"
          },
          "main": {
            "type": "boolean",
            "description": "(optional) Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."
          }
        }
      },
      "subscribe": {
        "description": "Subscribe to a graph.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph to subscribe to",
            "required": true
          }
        }
      },
      "unsubscribe": {
        "description": "Unsubscribe to a graph.",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph to unsubscribe from",
            "required": true
          }
        }
      },
      "addnode": {
        "description": "Add node to a graph.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "component": {
            "type": "string",
            "description": "component name used for the node",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for node metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "removenode": {
        "description": "Remove a node from a graph.",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "renamenode": {
        "description": "Change the ID of a node in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original identifier for the node",
            "required": true
          },
          "to": {
            "type": "string",
            "description": "new identifier for the node",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "changenode": {
        "description": "Change the metadata associated to a node in the graph",
        "properties": {
          "id": {
            "type": "string",
            "description": "identifier for the node",
            "required": true
          },
          "metadata": {
            "type": "object",
            "description": "structure of key-value pairs for node metadata",
            "required": true
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets",
            "required": true
          }
        }
      },
      "addedge": {
        "description": "Add an edge to the graph",
        "properties": {
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              },
              "index": {
                "type": [
                  "string",
                  "number"
                ],
                "description": "connection index (optional, for addressable ports)"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              },
              "index": {
                "type": [
                  "string",
                  "number"
                ],
                "description": "connection index (optional, for addressable ports)"
              }
            }
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for edge metadata"
          },
          "graph": {
            "description": "graph the action targets"
          }
        }
      },
      "removeedge": {
        "description": "Remove an edge from the graph",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          }
        }
      },
      "changeedge": {
        "description": "Change an edge's metadata",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "metadata": {
            "type": "object",
            "description": "struct of key-value pairs for edge metadata"
          },
          "src": {
            "type": "object",
            "description": "source node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            }
          }
        }
      },
      "addinitial": {
        "description": "Add an IIP to the graph",
        "properties": {
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for edge metadata"
          },
          "src": {
            "type": "object",
            "properties": {
              "data": {
                "type": "any",
                "description": "IIP value in its actual data type"
              }
            }
          },
          "tgt": {
            "type": "object",
            "description": "target node for the edge",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              },
              "index": {
                "type": [
                  "string",
                  "number"
                ],
                "description": "connection index (optional, for addressable ports)"
              }
            }
          }
        }
      },
      "removeinitial": {
        "description": "Remove an IIP from the graph",
        "properties": {
          "tgt": {
            "type": "object",
            "properties": {
              "node": {
                "type": "string",
                "description": "node identifier"
              },
              "port": {
                "type": "string",
                "description": "port name"
              }
            },
            "description": "target node for the edge"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addinport": {
        "description": "Add an exported inport to the graph.",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port"
          },
          "node": {
            "type": "string",
            "description": "node identifier"
          },
          "port": {
            "type": "string",
            "description": "internal port name"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for node metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removeinport": {
        "description": "Remove an exported port from the graph",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port to remove"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renameinport": {
        "description": "Rename an exported port in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original exported port name"
          },
          "to": {
            "type": "string",
            "description": "new exported port name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addoutport": {
        "description": "Add an exported outport to the graph.",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port"
          },
          "node": {
            "type": "string",
            "description": "node identifier"
          },
          "port": {
            "type": "string",
            "description": "internal port name"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for port metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removeoutport": {
        "description": "Remove an exported port from the graph",
        "properties": {
          "public": {
            "type": "string",
            "description": "the exported name of the port to remove"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renameoutport": {
        "description": "Rename an exported port in the graph",
        "properties": {
          "from": {
            "type": "string",
            "description": "original exported port name"
          },
          "to": {
            "type": "string",
            "description": "new exported port name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "addgroup": {
        "description": "Add a group to the graph",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name"
          },
          "nodes": {
            "type": "array",
            "description": "an array of node ids part of the group"
          },
          "metadata": {
            "type": "object",
            "description": "(optional): structure of key-value pairs for group metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "removegroup": {
        "description": "Remove a group from the graph",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "renamegroup": {
        "description": "Rename a group in the graph.",
        "properties": {
          "from": {
            "type": "string",
            "description": "original group name"
          },
          "to": {
            "type": "string",
            "description": "new group name"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      },
      "changegroup": {
        "description": "Change a group's metadata",
        "properties": {
          "name": {
            "type": "string",
            "description": "the group name"
          },
          "metadata": {
            "type": "object",
            "description": "structure of key-value pairs for group metadata"
          },
          "graph": {
            "type": "string",
            "description": "graph the action targets"
          }
        }
      }
    }
  }
}
